# CLO835 Final Project - 演示视频计划

## 视频概览
- **总时长**: 8-10分钟
- **目标**: 展示完整的两层Web应用程序在Amazon EKS上的部署和功能
- **观众**: 教授、同学、技术评审人员

---

## 第一部分：项目介绍 (1分钟)

### 开场白
> "欢迎观看CLO835 Final Project演示。本项目实现了一个完整的两层Web应用程序，部署在Amazon EKS集群上。"

### 项目架构概述
**屏幕显示**: 项目架构图或文件结构
```
演示内容:
- Flask Web应用程序 (前端层)
- MySQL数据库 (数据层)  
- Amazon S3存储 (静态资源)
- Amazon EKS (Kubernetes编排)
- 负载均衡器 (外部访问)
```

**解说词**: 
> "这是一个典型的两层架构，包含Web应用层和数据库层，所有组件都运行在Kubernetes集群中，实现了高可用性和可扩展性。"

---

## 第二部分：基础设施代码展示 (1.5分钟)

### Terraform配置演示
**屏幕显示**: `terraform/` 目录结构
```
展示文件:
- main.tf (主要基础设施配置)
- variables.tf (变量定义)
- outputs.tf (输出配置)
```

**重点展示**:
1. **EKS集群配置**
   ```hcl
   resource "aws_eks_cluster" "clo835_eks" {
     name     = var.cluster_name
     role_arn = aws_iam_role.clo835_eks_cluster_role.arn
     version  = "1.30"
   ```

2. **EBS CSI Driver自动配置**
   ```hcl
   resource "aws_eks_addon" "ebs_csi" {
     cluster_name = aws_eks_cluster.clo835_eks.name
     addon_name   = "aws-ebs-csi-driver"
   ```

3. **S3存储桶和IAM角色**
   ```hcl
   resource "aws_s3_bucket" "clo835_background_images"
   resource "aws_iam_role" "app_s3_role"
   ```

**解说词**:
> "我们使用Infrastructure as Code的方法，通过Terraform自动化部署所有AWS资源，包括EKS集群、网络配置、存储和权限管理。"

---

## 第三部分：Kubernetes清单文件 (1.5分钟)

### 应用部署配置
**屏幕显示**: `k8s-manifests/` 目录

**逐个展示文件**:

1. **命名空间** (`namespace.yaml`)
   ```yaml
   apiVersion: v1
   kind: Namespace
   metadata:
     name: fp
   ```

2. **MySQL部署** (`mysql-deployment.yaml`)
   - 数据库配置
   - 持久卷声明
   - 服务配置

3. **Web应用部署** (`webapp-deployment.yaml`)
   - Flask应用配置
   - 环境变量设置
   - 端口81配置

4. **权限配置** (`rbac.yaml`)
   - ServiceAccount
   - IAM角色绑定

**解说词**:
> "Kubernetes清单文件定义了应用程序的部署配置，包括Pod规格、服务发现、持久存储和访问权限。"

---

## 第四部分：应用程序代码 (1分钟)

### Flask应用演示
**屏幕显示**: `app.py` 主要代码段

**重点展示**:
1. **数据库连接**
   ```python
   def get_db_connection():
       return pymysql.connect(
           host=DBHOST,
           user=DBUSER,
           password=DBPWD,
           database=DATABASE
       )
   ```

2. **S3集成**
   ```python
   s3_client = boto3.client('s3', region_name=AWS_REGION)
   ```

3. **端口配置**
   ```python
   app.run(host='0.0.0.0',port=81,debug=False,threaded=True)
   ```

**解说词**:
> "Flask应用程序实现了完整的CRUD操作，支持员工信息管理，并从S3获取背景图片，严格按照项目要求监听81端口。"

---

## 第五部分：CI/CD流水线 (1分钟)

### GitHub Actions工作流
**屏幕显示**: `.github/workflows/ci-cd.yml`

**重点展示**:
1. **多架构构建**
   ```yaml
   - name: Set up Docker Buildx
     uses: docker/setup-buildx-action@v3
   
   - name: Build and push Docker image
     with:
       platforms: linux/amd64,linux/arm64
   ```

2. **自动部署**
   ```yaml
   - name: Update deployment manifests and deploy
     run: |
       sed -i "s|\${ECR_REPOSITORY_URI}|${ECR_URL}|g" k8s-manifests/webapp-deployment.yaml
       kubectl apply -f k8s-manifests/
   ```

**解说词**:
> "CI/CD流水线实现了完全自动化的构建和部署，支持多架构镜像构建，解决了M1 Mac兼容性问题。"

---

## 第六部分：实时部署状态检查 (2分钟)

### 连接EKS集群
**屏幕显示**: 终端操作
```bash
aws eks update-kubeconfig --region us-east-1 --name clo835-eks-cluster
kubectl cluster-info
```

### 检查部署状态
**逐步演示**:
1. **查看命名空间**
   ```bash
   kubectl get namespace fp
   ```

2. **检查Pod状态**
   ```bash
   kubectl get pods -n fp -o wide
   ```
   > 预期输出: mysql和webapp Pod都是Running状态

3. **查看服务**
   ```bash
   kubectl get svc -n fp
   ```
   > 展示LoadBalancer类型的服务和外部IP

4. **检查持久卷**
   ```bash
   kubectl get pv,pvc -n fp
   ```

5. **查看应用日志**
   ```bash
   kubectl logs deployment/webapp -n fp --tail=10
   ```
   > 展示S3连接成功和Flask启动日志

**解说词**:
> "可以看到所有组件都正常运行，MySQL数据库已就绪，Web应用程序成功连接到数据库和S3存储。"

---

## 第七部分：功能演示 (1.5分钟)

### Web应用实际操作
**屏幕显示**: 浏览器操作

1. **获取应用URL**
   ```bash
   kubectl get svc webapp-service -n fp -o jsonpath='{.status.loadBalancer.ingress[0].hostname}'
   ```

2. **访问主页**
   - 展示应用界面
   - 确认S3背景图片加载
   - 显示页面样式

3. **员工管理功能**
   - 添加员工信息
   - 查看员工列表
   - 验证数据库操作

4. **响应式测试**
   ```bash
   curl -s http://[LoadBalancer-URL] | grep "Employee"
   ```

**解说词**:
> "应用程序完全功能正常，用户可以通过LoadBalancer访问，所有CRUD操作都正常工作，S3集成也运行良好。"

---

## 第八部分：问题解决和改进 (1分钟)

### 部署修复总结
**屏幕显示**: `DEPLOYMENT_FIXES.md` 文档

**重点说明**:
1. **M1 Mac架构兼容性问题**
   > "通过多架构Docker构建解决"

2. **EBS CSI Driver配置**
   > "在Terraform中自动化配置"

3. **权限管理优化**
   > "使用IAM角色替代访问密钥"

4. **自动化部署脚本**
   > "创建了deploy.sh实现一键部署"

**解说词**:
> "在开发过程中遇到了多个典型的云原生部署挑战，我们都找到了有效的解决方案，并将其自动化。"

---

## 第九部分：项目合规性验证 (30秒)

### 需求检查清单
**屏幕显示**: 需求对照表

| 要求 | 状态 | 验证 |
|------|------|------|
| Flask应用端口81 | ✅ | `app.run(port=81)` |
| MySQL数据持久化 | ✅ | PVC + EBS卷 |
| S3背景图片 | ✅ | 页面显示正常 |
| LoadBalancer访问 | ✅ | 外部URL可访问 |
| ConfigMap/Secrets | ✅ | K8s资源存在 |
| EKS部署 | ✅ | 集群运行正常 |

**解说词**:
> "项目完全符合CLO835fp.md文档的所有要求，实现了生产级别的部署质量。"

---

## 结尾：总结与展望 (30秒)

### 项目成果
**屏幕显示**: 架构总览图

**总结要点**:
- ✅ 成功实现两层Web应用架构
- ✅ 完整的Kubernetes容器编排
- ✅ 自动化的CI/CD流水线
- ✅ 生产级别的监控和日志
- ✅ 安全的权限管理
- ✅ 可扩展的基础设施

**结束语**:
> "感谢观看CLO835 Final Project演示。本项目展示了现代云原生应用开发的完整流程，从代码到生产环境的自动化部署。"

---

## 录制技术要求

### 屏幕录制设置
- **分辨率**: 1920x1080 (Full HD)
- **帧率**: 30fps
- **音频**: 清晰的旁白，无背景噪音

### 演示环境准备
1. **终端配置**: 字体大小适中，颜色对比度高
2. **浏览器**: 清理书签栏，使用隐私模式
3. **桌面**: 清理桌面，关闭不相关应用
4. **网络**: 确保稳定的网络连接

### 关键截图时机
- 代码高亮显示
- 终端命令执行结果
- 浏览器页面加载
- Kubernetes资源状态
- 应用程序功能演示

这个演示计划确保了完整、专业的项目展示，涵盖了所有重要的技术点和项目要求。
